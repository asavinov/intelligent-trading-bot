# ๐งฉ ูุงฺููโูุง ูุดุชุฑฺฉ (Common Modules)

## ๐ ูุนุฑู

ูุงฺููโูุง ููุฌูุฏ ุฏุฑ ูพูุดู `common` ุดุงูู ฺฉูุงุณโูุง ู ุชูุงุจุน ูพุงูโุง ูุณุชูุฏ ฺฉู ุฏุฑ ุณุฑุงุณุฑ ูพุฑูฺู ููุฑุฏ ุงุณุชูุงุฏู ูุฑุงุฑ ูโฺฏุฑูุฏ. ุงู ูุงฺููโูุง ุจู ุตูุฑุช ูุงฺููุงุฑ ุทุฑุงุญ ุดุฏูโุงูุฏ ุชุง ูุงุจูุช ุงุณุชูุงุฏู ูุฌุฏุฏ ู ูฺฏูุฏุงุฑ ุขุณุงูโุชุฑ ุฑุง ูุฑุงูู ฺฉููุฏ.

## ๐๏ธ ุณุงุฎุชุงุฑ ูพูุดู

```
common/
โโโ __init__.py           # ูุงฺูู ุงุตู
โโโ backtesting.py        # ุงุจุฒุงุฑูุง ุจฺฉโุชุณุช ู ุดุจูโุณุงุฒ ูุนุงููุงุช
โโโ classifiers.py        # ูพุงุฏูโุณุงุฒ ุงูฺฏูุฑุชูโูุง ุงุฏฺฏุฑ ูุงุดู
โโโ depth_processing.py   # ูพุฑุฏุงุฒุด ุนูู ุจุงุฒุงุฑ (Order Book)
โโโ gen_features.py       # ุชููุฏ ูฺฺฏโูุง ูพุงู ุงุฒ ุฏุงุฏูโูุง ุจุงุฒุงุฑ
โโโ gen_features_rolling_agg.py # ุชููุฏ ูฺฺฏโูุง ุชุฌูุน ุจุง ูพูุฌุฑูโูุง ูุชุญุฑฺฉ
โโโ gen_labels_highlow.py # ุชููุฏ ุจุฑฺุณุจโูุง High/Low ุจุฑุง ูุฏูโูุง ุทุจููโุจูุฏ
โโโ gen_labels_topbot.py  # ุชููุฏ ุจุฑฺุณุจโูุง Top/Bottom ุจุฑุง ุชุดุฎุต ููุงุท ุจุงุฒฺฏุดุช
โโโ gen_signals.py        # ุชููุฏ ุณฺฏูุงูโูุง ูุนุงููุงุช ุงุฒ ูพุดโุจูโูุง
โโโ generators.py         # ฺฉูุงุณโูุง ูพุงู ุจุฑุง ุชููุฏ ูฺฺฏโูุง ู ุจุฑฺุณุจโูุง
โโโ model_store.py        # ูุฏุฑุช ูุฏูโูุง ุงุฏฺฏุฑ ูุงุดู ู ูพุงุฑุงูุชุฑูุง
โโโ my_feature_example.py # ูุซุงู ุณุงุฎุช ูฺฺฏ ุณูุงุฑุด
โโโ types.py              # ุชุงูพโูุงุ Enumูุง ู ุณุงุฎุชุงุฑูุง ุฏุงุฏู
โโโ utils.py              # ุชูุงุจุน ฺฉูฺฉ ุนููู
โโโ utils_mt5.py         # ุชูุงุจุน ฺฉูฺฉ ูุฎุตูุต MetaTrader 5
```

## ๐ ุชูุถุญุงุช ููุตู ูุงฺููโูุง

### 1. `model_store.py`

#### ูุธูู
ูุฏุฑุช ุจุงุฑฺฏุฐุงุฑุ ุฐุฎุฑูโุณุงุฒ ู ุจุงุฒุงุจ ูุฏูโูุง ุงุฏฺฏุฑ ูุงุดู ู ูพุงุฑุงูุชุฑูุง ุขูโูุง.

#### ฺฉูุงุณโูุง ุงุตู

```python
class ModelStore:
    """
    ูุฏุฑุช ูุฏูโูุง ุงุฏฺฏุฑ ูุงุดู ู ูพุงุฑุงูุชุฑูุง ุขูโูุง
    """
    def __init__(self, config):
        """
        ููุฏุงุฑุฏู ุงููู ุจุง ุชูุธูุงุช ูพฺฉุฑุจูุฏ
        """
        
    def load_models(self):
        """
        ุจุงุฑฺฏุฐุงุฑ ูุฏูโูุง ุงุฒ ุญุงูุธู ุฏุงุฆู
        """
        
    def get_model(self, name):
        """
        ุฏุฑุงูุช ูุฏู ุจุฑ ุงุณุงุณ ูุงู
        """
        
    def put_model(self, name, model):
        """
        ุฐุฎุฑู ูุฏู ุฌุฏุฏ
        """
```

#### ูุซุงู ุงุณุชูุงุฏู

```python
from common.model_store import ModelStore

# ููุฏุงุฑุฏู ุงููู
model_store = ModelStore(config)

# ุจุงุฑฺฏุฐุงุฑ ูุฏูโูุง
model_store.load_models()

# ุฏุฑุงูุช ฺฉ ูุฏู
rsi_model = model_store.get_model('rsi_classifier')

# ุฐุฎุฑู ูุฏู ุฌุฏุฏ
model_store.put_model('new_model', trained_model)
```

### 2. `generators.py`

#### ูุธูู
ูุฑุงููโุขูุฑ ฺฉูุงุณโูุง ูพุงู ุจุฑุง ุชููุฏ ูฺฺฏโูุง ู ุจุฑฺุณุจโูุง.

#### ฺฉูุงุณโูุง ุงุตู

```python
class FeatureGenerator:
    """
    ฺฉูุงุณ ูพุงู ุจุฑุง ุชููุฏ ูฺฺฏโูุง ุฌุฏุฏ ุงุฒ ุฏุงุฏูโูุง ุฎุงู
    """
    def generate(self, df, params):
        """
        ุชููุฏ ูฺฺฏโูุง ุฌุฏุฏ
        """
        
class LabelGenerator:
    """
    ฺฉูุงุณ ูพุงู ุจุฑุง ุชููุฏ ุจุฑฺุณุจโูุง ุขููุฒุด
    """
    def generate(self, df, params):
        """
        ุชููุฏ ุจุฑฺุณุจโูุง ุขููุฒุด
        """
```

### 3. `gen_features.py` ู `gen_features_rolling_agg.py`

#### ูุธูู
ุชููุฏ ูฺฺฏโูุง ุชฺฉูฺฉุงู ู ุขูุงุฑ ุงุฒ ุฏุงุฏูโูุง ุจุงุฒุงุฑ.

#### ุชูุงุจุน ฺฉูุฏ

```python
def generate_features(df, config, model_store):
    """
    ุชููุฏ ูฺฺฏโูุง ุชฺฉูฺฉุงู ุงุฒ ุฏุงุฏูโูุง OHLCV
    
    ูพุงุฑุงูุชุฑูุง:
        df: ุฏุชุงูุฑู ุญุงู ุฏุงุฏูโูุง ุจุงุฒุงุฑ
        config: ุชูุธูุงุช ูพฺฉุฑุจูุฏ
        model_store: ูุฎุฒู ูุฏูโูุง
        
    ุจุงุฒฺฏุดุช:
        ุฏุชุงูุฑู ุญุงู ูฺฺฏโูุง ุชููุฏ ุดุฏู
    """
```

### 4. `gen_labels_highlow.py` ู `gen_labels_topbot.py`

#### ูุธูู
ุชููุฏ ุจุฑฺุณุจโูุง ุขููุฒุด ุจุฑุง ูุฏูโูุง ุงุฏฺฏุฑ ูุงุดู.

#### ูุซุงู

```python
def generate_highlow_labels(df, config):
    """
    ุชููุฏ ุจุฑฺุณุจโูุง High/Low ุจุฑุง ุชุดุฎุต ุฑููุฏ
    """
    
def generate_topbot_labels(df, config):
    """
    ุชููุฏ ุจุฑฺุณุจโูุง Top/Bottom ุจุฑุง ุชุดุฎุต ููุงุท ุจุงุฒฺฏุดุช
    """
```

### 5. `backtesting.py`

#### ูุธูู
ุดุจูโุณุงุฒ ู ุงุฑุฒุงุจ ุงุณุชุฑุงุชฺโูุง ูุนุงููุงุช ุจุฑ ุฑู ุฏุงุฏูโูุง ุชุงุฑุฎ.

#### ูุซุงู ุงุณุชูุงุฏู

```python
from common.backtesting import BacktestEngine

# ุชุนุฑู ุงุณุชุฑุงุชฺ
class MyStrategy:
    def generate_signals(self, data):
        # ููุทู ุชููุฏ ุณฺฏูุงู
        pass

# ุงุฌุฑุง ุจฺฉโุชุณุช
engine = BacktestEngine()
results = engine.run(MyStrategy(), historical_data)
```

### 6. `classifiers.py`

#### ูุธูู
ูพุงุฏูโุณุงุฒ ุงูฺฏูุฑุชูโูุง ุงุฏฺฏุฑ ูุงุดู ุจุฑุง ูพุดโุจู ููุชโูุง.

#### ูุซุงู

```python
class PricePredictor:
    def train(self, X, y):
        """
        ุขููุฒุด ูุฏู
        """
        
    def predict(self, X):
        """
        ูพุดโุจู ุจุฑ ุงุณุงุณ ูุฏู ุขููุฒุดโุฏุฏู
        """
```

### 7. `utils.py` ู `utils_mt5.py`

#### ุชูุงุจุน ฺฉูุฏ

```python
# ุชุจุฏู ุฏุงุฏูโูุง Kline ุจู ุฏุชุงูุฑู
def binance_klines_to_df(klines):
    """
    ุชุจุฏู ุฏุงุฏูโูุง Kline ุจู ุฏุชุงูุฑู ูพุงูุฏุงุณ
    """

# ุชุจุฏู ูุฑฺฉุงูุณ Pandas ุจู MT5
def mt5_freq_from_pandas(freq):
    """
    ุชุจุฏู ูุฑฺฉุงูุณ Pandas ุจู ูุฑูุช MetaTrader 5
    """
```

## ๐ ุฌุฑุงู ุฏุงุฏู ุจู ูุงฺููโูุง

```mermaid
graph TD
    A[ุฏุงุฏูโูุง ุฎุงู] --> B[gen_features.py]
    B --> C[ูฺฺฏโูุง ุงุณุชุฎุฑุงุฌ ุดุฏู]
    C --> D[gen_labels_*.py]
    D --> E[ุจุฑฺุณุจโูุง ุขููุฒุด]
    E --> F[classifiers.py]
    F --> G[ูุฏูโูุง ุขููุฒุดโุฏุฏู]
    G --> H[model_store.py]
    H --> I[gen_signals.py]
    I --> J[ุณฺฏูุงูโูุง ูุนุงููุงุช]
    J --> K[backtesting.py]
```

## ๐๏ธ ุจูุชุฑู ุฑูุดโูุง ุงุณุชูุงุฏู

1. **ูุฏุฑุช ูุฏูโูุง**:
   - ููุดู ุงุฒ `ModelStore` ุจุฑุง ูุฏุฑุช ูุฏูโูุง ุงุณุชูุงุฏู ฺฉูุฏ
   - ูุฏูโูุง ุฌุฏุฏ ุฑุง ุจุง ูุงูโูุง ุชูุตู ุฐุฎุฑู ฺฉูุฏ
   - ูุจู ุงุฒ ุงุณุชูุงุฏู ุงุฒ ูุฏูุ ุงุฒ ุจุงุฑฺฏุฐุงุฑ ุขู ูุทูุฆู ุดูุฏ

2. **ุชููุฏ ูฺฺฏโูุง**:
   - ุงุฒ ุชูุงุจุน ููุฌูุฏ ุฏุฑ `gen_features.py` ุงุณุชูุงุฏู ฺฉูุฏ
   - ุจุฑุง ูฺฺฏโูุง ุณูุงุฑุดุ ุงุฒ `my_feature_example.py` ุงูฺฏูุจุฑุฏุงุฑ ฺฉูุฏ
   - ุงุฒ `generators.py` ุจุฑุง ุชูุณุนู ฺูุฑุงุชูุฑูุง ุณูุงุฑุด ุงุณุชูุงุฏู ฺฉูุฏ

3. **ุชููุฏ ุจุฑฺุณุจโูุง**:
   - ุงุฒ `gen_labels_highlow.py` ุจุฑุง ุจุฑฺุณุจโฺฏุฐุงุฑ ุฑููุฏูุง
   - ุงุฒ `gen_labels_topbot.py` ุจุฑุง ุชุดุฎุต ููุงุท ุจุงุฒฺฏุดุช

4. **ุงุดฺฉุงูโุฒุฏุง**:
   - ุงุฒ ุชูุงุจุน ฺฉูฺฉ ุฏุฑ `utils.py` ุจุฑุง ุนููุงุช ุฑุงุฌ ุงุณุชูุงุฏู ฺฉูุฏ
   - ูุงฺฏโูุง ููุงุณุจ ุฏุฑ ฺฉุฏ ุฎูุฏ ูุฑุงุฑ ุฏูุฏ

## ๐ ููุงุจุน ุจุดุชุฑ

- [ูุณุชูุฏุงุช Pandas](https://pandas.pydata.org/docs/)
- [ูุณุชูุฏุงุช TA-Lib](https://mrjbq7.github.io/ta-lib/)
- [ูุณุชูุฏุงุช Scikit-learn](https://scikit-learn.org/stable/documentation.html)
